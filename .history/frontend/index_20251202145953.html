<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flood Guard â€“ Official Flood Safety System</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
</head>
<body>

<!-- Background video -->
<video id="bg-video" autoplay muted loop playsinline>
    <source src="video/rain_background.mp4" type="video/mp4">
</video>
<div id="video-overlay"></div>

<header>
    <div class="app-title">ğŸŒŠ Flood Guard</div>
    <div class="top-nav">
        <div class="nav-menu">
            <button onclick="showSection('dashboard')" class="active">Dashboard</button>
            <button onclick="showSection('alerts')">Alerts</button>
            <button onclick="showSection('prediction')">Prediction</button>
            <button onclick="showSection('shelter')">Shelter</button>
            <button onclick="showSection('route')">Route</button>
            <button onclick="showSection('radar')">Radar</button>
            <button onclick="showSection('report')">Report</button>
            <button onclick="showSection('rescue')">Rescue</button>
            <button onclick="showSection('history')">History</button>
            <button onclick="showSection('community')">Community</button>
            <button onclick="showSection('account')">Account</button>
        </div>
    </div>
</header>

<main>

    <!-- DASHBOARD -->
    <section id="dashboard" class="section active">
        <h2>ğŸ“ Live Dashboard</h2>
        <p><strong>Location:</strong> <span id="user-location">Detecting...</span></p>

        <div class="status-cards">
            <div class="card"><strong>Temperature</strong><p id="temp">--Â°C</p></div>
            <div class="card"><strong>Rainfall</strong><p id="rain">-- mm</p></div>
            <div class="card"><strong>Humidity</strong><p id="humidity">--%</p></div>
            <div class="card"><strong>Battery</strong><p id="battery-status">--%</p></div>
        </div>

        <div class="map-container">
            <h3>ğŸ—º Flood Map</h3>
            <div id="map"></div>
        </div>

        <div class="risk-indicator">
            <h3>Flood Risk Level: <span id="risk-text">Loading...</span></h3>
            <div id="risk-color"></div>
        </div>
    </section>

    <!-- ALERTS -->
    <section id="alerts" class="section">
        <h2>ğŸš¨ Flood Alerts</h2>
        <div id="alerts-container">
            <p>Alerts will be generated automatically based on AI predictions and reports.</p>
        </div>
    </section>

    <!-- PREDICTION -->
    <section id="prediction" class="section">
        <h2>ğŸ¤– AI Model Prediction</h2>
        <p>Flood Guard uses AI to estimate risk based on weather and patterns.</p>
        <button onclick="runPrediction()">Run AI Prediction</button>
        <p><strong>Predicted Level:</strong> <span id="predicted-level">--</span></p>
    </section>

    <!-- SHELTER -->
    <section id="shelter" class="section">
        <h2>ğŸš Nearby Safe Shelters</h2>
        <div id="shelter-list">Loading shelters...</div>
    </section>

    <!-- ROUTE -->
    <section id="route" class="section">
        <h2>ğŸš— Safe Route Navigation</h2>
        <button id="find-route">Find Safe Route</button>
        <p id="route-result">Waiting...</p>
    </section>

    <!-- RADAR -->
    <section id="radar" class="section">
        <h2>ğŸ›° Real-Time Weather Radar</h2>
        <iframe id="radar-map"
            src="https://www.rainviewer.com/map.html"
            style="width:100%; height:400px; border:none;">
        </iframe>
    </section>

    <!-- REPORT -->
    <section id="report" class="section">
        <h2>ğŸ“ Report Flood Situation</h2>
        <textarea id="report-text" placeholder="Describe flooding, road blockage, damages, people stuck..."></textarea>
        <button onclick="submitReport()">Submit Report</button>
    </section>

    <!-- RESCUE -->
    <section id="rescue" class="section">
        <h2>ğŸ†˜ Rescue & Emergency</h2>
        <button onclick="triggerSOS()" class="sos-btn">ğŸš¨ SOS Emergency</button>
        <div class="contact-list">
            <p><strong>ğŸš‘ Ambulance:</strong> 108</p>
            <p><strong>ğŸ”¥ Fire:</strong> 101</p>
            <p><strong>ğŸ‘® Police:</strong> 100</p>
        </div>
    </section>

    <!-- HISTORY -->
    <section id="history" class="section">
        <h2>ğŸ“„ Activity History</h2>
        <div id="history-data">No data yet.</div>
    </section>

    <!-- COMMUNITY -->
    <section id="community" class="section">
        <h2>â¤ï¸ Community Support</h2>
        <button onclick="addVolunteer()">Add Volunteer</button>
        <div id="volunteer-list">Loading...</div>
    </section>


    <!-- ğŸ“Œ ACCOUNT SECTION (FINAL UPGRADED) -->
    <section id="account" class="section">
        <h2>ğŸ‘¤ Account & Settings</h2>

        <!-- LOGIN / SIGNUP -->
        <div class="account-box">
            <div id="login-section">
                <h3>Login / Sign Up</h3>
                <input type="text" id="phone-input" placeholder="Phone Number (+91...)">
                <button onclick="sendOTP()">Send OTP</button>

                <input type="text" id="otp-input" placeholder="Enter OTP" style="display:none;">
                <button onclick="verifyOTP()" id="verify-otp-btn" style="display:none;">Verify OTP</button>

                <hr>

                <input type="email" id="email-input" placeholder="Email">
                <input type="password" id="email-pass" placeholder="Password">
                <button onclick="emailLogin()">Login / Sign Up</button>
            </div>

            <!-- LOGGED IN UI -->
            <div id="profile-section" style="display:none;">
                <img id="profile-img" class="profile-pic" src="assets/user.png" onclick="changeProfile()">
                <p id="logged-user-contact"></p>
                <button onclick="logout()">Logout</button>
            </div>
        </div>

        <!-- SETTINGS -->
        <div class="account-box">
            <h3>âš™ Preferences</h3>
            <label>ğŸŒ Language</label>
            <select id="lang-select">
                <option>English</option>
                <option>Hindi</option>
                <option>Kannada</option>
                <option>Tamil</option>
                <option>Telugu</option>
            </select>

            <label>ğŸ¨ App Mode</label>
            <select id="mode-select" onchange="toggleTheme()">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="power">Power Saving</option>
            </select>
        </div>

        <!-- SHARE -->
        <div class="account-box">
            <h3>ğŸ“¤ Share App</h3>
            <button onclick="shareApp()">Share App</button>
        </div>

        <!-- FEEDBACK -->
        <div class="account-box">
            <h3>â­ Rate & Feedback</h3>
            <textarea id="feedback-text" placeholder="Write your feedback..."></textarea>
            <button onclick="submitFeedback()">Submit</button>
        </div>

        <!-- ABOUT -->
        <div class="account-box">
            <h3>â„¹ About Flood Guard</h3>
            <p>Flood Guard is an AI-powered safety system designed to help people stay prepared and safe during flood emergencies.</p>
            <p>Version: <strong>1.0.0 Beta</strong></p>
        </div>

        <!-- FAQ -->
        <div class="account-box">
            <h3>â“ FAQ</h3>
            <details><summary>Does it work offline?</summary><p>Yes. Core features remain functional offline.</p></details>
            <details><summary>Do you store personal data?</summary><p>No. All data is stored only on your device.</p></details>
        </div>

        <!-- TERMS -->
        <div class="account-box">
            <h3>ğŸ“œ Terms</h3>
            <p>By using Flood Guard, you agree that this is a decision-support tool, not a replacement for official rescue agencies.</p>
        </div>
    </section>

</main>

<footer>
    <p>Â© 2025 Flood Guard | Disaster Safety Prototype</p>
</footer>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="js/app.js"></script>
</body>
</html>
